pipeline {
  agent any

  stages {
    // stage('Install Helm') {
    //   steps {
    //     script {
    //       sh 'choco install kubernetes-helm -y'
    //     }
    //   }
    // }

    // stage("Check helm version") {
    //   steps {
    //     script {
    //       def helmV = sh(script: 'helm version', returnStdout: true)
    //       echo "Helm version: ${helmV}"
    //     }
    //   }
    // }

    stage('Check Namespace') {
      steps {
        script {
<<<<<<< HEAD
          sh 'minikube start'
          
          def queryNamespace = sh(script: 'minikube kubectl get namespace', returnStdout: true).trim()
=======
          def queryNamespace = sh(script: 'kubectl get namespace', returnStdout: true).trim()
>>>>>>> parent of 14401ee (Try start minikube)
          echo "Namespace: ${namespace}"
          // def namespaceExists = sh(script: 'kubectl get namespace wp', returnStatus: true)
          // echo "Namespace exists: ${namespaceExists}"
          // if (namespaceExists != 0) {
          //   sh 'kubectl create namespace wp'
          // }
        }
      }
    }

    // stage('Install Helm') {
    //   steps {
    //     script {
    //       sh 'choco install kubernetes-helm --force -y'
    //     }
    //   }
    // }

    // stage('Check and Install WordPress') {
    //   steps {
    //     script {
    //       def deploymentExists = sh(script: 'kubectl get deployment -n wp final-project-wp-scalefocus', returnStatus: true)
    //       if (deploymentExists != 0) {
    //         sh 'helm install final-project-wp-scalefocus bitnami/wordpress -n wp -f wordpress/values.yaml'
    //       }
    //     }
    //   }
    // }
  }
}
